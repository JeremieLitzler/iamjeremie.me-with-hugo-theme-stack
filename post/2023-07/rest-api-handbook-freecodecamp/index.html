<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='This is a copy of the article of Germán Cocca, published on www.freecodecamp.org'><title>The REST API Handbook – How to Build, Test, Consume, and Document REST APIs, by Germán Cocca</title>
<link rel=canonical href=https://iamjeremie.me/post/2023-07/rest-api-handbook-freecodecamp/ itemprop=url><link rel=stylesheet href=/scss/style.min.d8118f156935b64eca93aca758476adca858d2c47354971654d9bd2933a0e45f.css><meta property='og:title' content='The REST API Handbook – How to Build, Test, Consume, and Document REST APIs, by Germán Cocca'><meta property='og:description' content='This is a copy of the article of Germán Cocca, published on www.freecodecamp.org'><meta property='og:url' content='https://iamjeremie.me/post/2023-07/rest-api-handbook-freecodecamp/'><meta property='og:site_name' content='Jérémie Litzler'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='REST API'><meta property='article:tag' content='NodeJS'><meta property='article:published_time' content='2023-07-03T00:00:00+00:00'><meta property='article:modified_time' content='2023-07-03T00:00:00+00:00'><meta name=twitter:title content="The REST API Handbook – How to Build, Test, Consume, and Document REST APIs, by Germán Cocca"><meta name=twitter:description content="This is a copy of the article of Germán Cocca, published on www.freecodecamp.org"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/profilepic-400w_hu0d260670f142c28330b6a3dd6fbeddc8_111803_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><p class=site-name><a href=/>Jérémie Litzler</a></p><p class=site-description>I share my notes and experiences that can be useful to one of you. Enjoy the read!</p></div></header><ol class=social-menu><li><a href=https://github.com/JeremieLitzler target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/LitzlerJeremie target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>Who am I?</span></a></li><li><a href=/page/sponsor-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart-handshake" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#707070" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572 12 20l-7.5-7.428A5 5 0 1112 6.006a5 5 0 117.5 6.572"/><path d="M12 6 8.707 9.293a1 1 0 000 1.414l.543.543c.69.69 1.81.69 2.5.0l1-1a3.182 3.182.0 014.5.0l2.25 2.25"/><path d="M12.5 15.5l2 2"/><path d="M15 13l2 2"/></svg>
<span>Support my work</span></a></li><li><a href=/page/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/page/contact-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-message-chatbot" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#707070" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 21V8a3 3 0 013-3h10a3 3 0 013 3v6a3 3 0 01-3 3H8l-4 4"/><path d="M9.5 9h.01"/><path d="M14.5 9h.01"/><path d="M9.5 13a3.5 3.5.0 005 0"/></svg>
<span>Let's talk</span></a></li><li><a href=/page/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://iamjeremie.me/ selected></option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#what-is-rest>What is REST?</a></li><li><a href=#how-to-build-a-rest-api-with-node-and-express>How to Build a REST API with Node and Express</a><ol><li><a href=#our-tools>Our tools</a></li></ol></li><li><a href=#our-architecture>Our architecture</a><ol><li><a href=#application-layers>Application layers</a></li><li><a href=#the-code-for-the-api>The code for the API</a></li><li><a href=#appjs>App.js</a></li><li><a href=#routes>Routes</a></li><li><a href=#controllers>Controllers</a></li><li><a href=#models>Models</a></li><li><a href=#database>Database</a></li></ol></li><li><a href=#how-to-test-a-rest-api-with-supertest>How to Test a REST API with Supertest</a><ol><li><a href=#our-tools-to-test>Our tools to test</a></li><li><a href=#the-code-to-test>The code to test</a></li></ol></li><li><a href=#how-to-consume-a-rest-api-on-a-front-end-react-app>How to Consume a REST API on a Front-end React App</a><ol><li><a href=#our-frontend-tools>Our frontend tools</a></li><li><a href=#the-frontend-code>The frontend code</a></li><li><a href=#appjsx>App.jsx</a></li><li><a href=#petlistjsx>PetList.jsx</a></li><li><a href=#petdetailjsx>PetDetail.jsx</a></li><li><a href=#addpetjsx>AddPet.jsx</a></li><li><a href=#editpetjsx>EditPet.jsx</a></li></ol></li><li><a href=#how-to-document-a-rest-api-with-swagger>How to Document a REST API with Swagger</a><ol><li><a href=#our-tools-for-swagger>Our tools for Swagger</a></li><li><a href=#how-to-implement-swagger>How to Implement Swagger</a></li></ol></li><li><a href=#wrapping-up>Wrapping Up</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/web-development/>Web Development</a></header><div class=article-title-wrapper><h1 class=article-title><a href=/post/2023-07/rest-api-handbook-freecodecamp/>The REST API Handbook – How to Build, Test, Consume, and Document REST APIs, by Germán Cocca</a></h1><h2 class=article-subtitle>This is a copy of the article of Germán Cocca, published on www.freecodecamp.org</h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 03, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>34 minute read</time></div></footer></div></header><section class=article-content><p>The following article is a copy of <a href=https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/>https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/</a>, an article written by Germán Cocca.</p><p>I used it to learn the basis of API development with NodeJS.</p><p>I particularly like the folder structure and empahasis on the architecture.</p><div class="jli-notice jli-notice-note" id="Why a copy?"><p class=jli-notice-title>Why a copy?</p><p>The original article doesn&rsquo;t provide a table of contents accessible on the side like my blog.</p></div><p>Hi everyone! In this tutorial we&rsquo;re going to take a deep dive into REST APIs.</p><p>I recently wrote <a href=https://www.freecodecamp.org/news/rest-vs-graphql-apis/>this article</a> where I explained the main differences between common API types nowadays. And this tutorial aims to show you an example of how you can fully implement a REST API.</p><p>We&rsquo;ll cover basic setup and architecture with Node and Express, unit testing with Supertest, seeing how we can consume the API from a React front-end app and finally documenting the API using tools such as Swagger.</p><p>Keep in mind we won&rsquo;t go too deep into how each technology works. The goal here is to give you a general overview of how a REST API works, how its pieces interact, and what a full implementation might consist of.</p><p>Let&rsquo;s go!</p><h2 id=what-is-rest>What is REST?</h2><p>Representational State Transfer (REST) is a widely used architectural style for building web services and APIs.</p><p>RESTful APIs are designed to be simple, scalable, and flexible. They are often used in web and mobile applications, as well as in Internet of Things (IoT) and microservices architectures.</p><p>*<strong>*Main Characteristics:**</strong></p><ol><li>*<strong>*Stateless:**</strong> REST APIs are stateless, which means that each request contains all the necessary information to process it. This makes it easier to scale the API and improves performance by reducing the need to store and manage session data on the server.</li><li>*<strong>*Resource-based:**</strong> REST APIs are resource-based, which means that each resource is identified by a unique URI (Uniform Resource Identifier) and can be accessed using standard HTTP methods such as GET, POST, PUT, and DELETE.</li><li>*<strong>*Uniform Interface:**</strong> REST APIs have a uniform interface that allows clients to interact with resources using a standardized set of methods and response formats. This makes it easier for developers to build and maintain APIs, and for clients to consume them.</li><li>*<strong>*Cacheable:**</strong> REST APIs are cacheable, which means that responses can be cached to improve performance and reduce network traffic.</li><li>*<strong>*Layered System:**</strong> REST APIs are designed to be layered, which means that intermediaries such as proxies and gateways can be added between the client and server without affecting the overall system.</li></ol><p>*<strong>*Pros</strong> of REST APIs**:****</p><ul><li>*<strong>*Easy to learn and use:**</strong> REST APIs are relatively simple and easy to learn compared to other APIs.</li><li>*<strong>*Scalability:**</strong> The stateless nature of REST APIs makes them highly scalable and efficient.</li><li>*<strong>*Flexibility:**</strong> REST APIs are flexible and can be used to build a wide range of applications and systems.</li><li>*<strong>*Wide support:**</strong> REST APIs are widely supported by development tools and frameworks, making it easy to integrate them into existing systems.</li></ul><p>*<strong>*Cons</strong> of REST APIs**:****</p><ul><li>*<strong>*Lack of standards:**</strong> The lack of strict standards for REST APIs can lead to inconsistencies and interoperability issues.</li><li>*<strong>*Limited functionality:**</strong> REST APIs are designed to handle simple requests and responses and may not be suitable for more complex use cases.</li><li>*<strong>*Security concerns:**</strong> REST APIs can be vulnerable to security attacks such as cross-site scripting (XSS) and cross-site request forgery (CSRF) if not implemented properly.</li></ul><p><strong>REST APIs are b</strong>est for:****</p><ul><li>REST APIs are well-suited for building web and mobile applications, as well as microservices architectures and IoT systems.</li><li>They are particularly useful in situations where scalability and flexibility are important, and where developers need to integrate with existing systems and technologies.</li></ul><p>In summary, REST APIs are a popular and widely used architectural style for building web services and APIs. They are simple, scalable, and flexible, and can be used to build a wide range of applications and systems.</p><p>While there are some limitations and concerns with REST APIs, they remain a popular and effective option for building APIs in many different industries and sectors.</p><h2 id=how-to-build-a-rest-api-with-node-and-express>How to Build a REST API with Node and Express</h2><h3 id=our-tools>Our tools</h3><p><strong><a href=https://nodejs.org/>Node.js</a></strong> is an open-source, cross-platform, back-end JavaScript runtime environment that allows developers to execute JavaScript code outside of a web browser. It was created by Ryan Dahl in 2009 and has since become a popular choice for building web applications, APIs, and servers.</p><p>Node.js provides an event-driven, non-blocking I/O model that makes it lightweight and efficient, allowing it to handle large amounts of data with high performance. It also has a large and active community, with many libraries and modules available to help developers build their applications more quickly and easily.</p><p><a href=https://expressjs.com/><strong>Express.js</strong></a> is a popular web application framework for Node.js, which is used to build web applications and APIs. It provides a set of features and tools for building web servers, handling HTTP requests and responses, routing requests to specific handlers, handling middleware, and much more.</p><p>Express is known for its simplicity, flexibility, and scalability, making it a popular choice for developers building web applications with Node.js.</p><p>Some of the key features and benefits of Express.js include:</p><ul><li><strong>Minimalistic and flexible:</strong> Express.js provides a minimalistic and flexible structure that allows developers to build applications the way they want to.</li><li><strong>Routing:</strong> Express.js makes it easy to define routes for handling HTTP requests and mapping them to specific functions or handlers.</li><li><strong>Middleware:</strong> Express.js allows developers to define middleware functions that can be used to handle common tasks such as authentication, logging, error handling, and more.</li><li><strong>Robust API:</strong> Express.js provides a robust API for handling HTTP requests and responses, allowing developers to build high-performance web applications.</li></ul><h2 id=our-architecture>Our architecture</h2><p>For this project we&rsquo;ll follow a layers architecture in our codebase. Layers architecture is about dividing concerns and responsibilities into different folders and files, and allowing direct communication only between certain folders and files.</p><p>The matter of how many layers should your project have, what names should each layer have, and what actions should it handle is all a matter of discussion. So let&rsquo;s see what I think is a good approach for our example.</p><p>Our application will have five different layers, which will be ordered in this way:</p><h3 id=application-layers>Application layers</h3><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-110.png width=393 height=342 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-110_hubc8c23bafd8384b8f174b62f68f5bfd4_10126_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-110_hubc8c23bafd8384b8f174b62f68f5bfd4_10126_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-110_hubc8c23bafd8384b8f174b62f68f5bfd4_10126_1024x0_resize_box_3.png 1024w" loading=lazy alt="Application layers" class=gallery-image data-flex-grow=114 data-flex-basis=275px></p><ul><li>The application layer will have the basic setup of our server and the connection to our routes (the next layer).</li><li>The routes layer will have the definition of all of our routes and the connection to the controllers (the next layer).</li><li>The controllers layer will have the actual logic we want to perform in each of our endpoints and the connection to the model layer (the next layer, you get the idea&mldr;)</li><li>The model layer will hold the logic for interacting with our mock database.</li><li>Finally, the persistence layer is where our database will be.</li></ul><p>An important thing to keep in mind is that in these kinds of architectures, *<strong>*there&rsquo;s a defined communication flow**</strong> between the layers that has to be followed for it to make sense.</p><p>This means that a request first has to go through the first layer, then the second, then the third and so on. No request should skip layers because that would mess with the logic of the architecture and the benefits of organization and modularity it gives us.</p><blockquote><p>If you&rsquo;d like to know some other API architecture options, I recommend <a href=https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/>you this software architecture article</a> I wrote a while ago.</p></blockquote><h3 id=the-code-for-the-api>The code for the API</h3><p>Before jumping to the code, let&rsquo;s mention what we&rsquo;ll actually build. We&rsquo;ll be building an API for a pet shelter business. This pet shelter needs to register the pets that are staying in the shelter, and for that we&rsquo;ll perform basic CRUD operations (create, read, update and delete).</p><p>Now yeah, let&rsquo;s get this thing going. Create a new directory, hop on to it and start a new Node project by running <code>npm init -y</code>.</p><p>Then install Express by running <code>npm i express</code> and install nodemon as a dev dependency by running <code>npm i -D nodemon</code> (<a href=https://nodemon.io/>Nodemon</a> is a tool we&rsquo;ll use to get our server running and test it). Lastly, also run <code>npm i cors</code>, which we&rsquo;ll use to be able to test our server locally.</p><h3 id=appjs>App.js</h3><p>Cool, now create an <code>app.js</code> file and drop this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=nx>from</span> <span class=s2>&#34;express&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>cors</span> <span class=nx>from</span> <span class=s2>&#34;cors&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>petRoutes</span> <span class=nx>from</span> <span class=s2>&#34;./pets/routes/pets.routes.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>port</span> <span class=o>=</span> <span class=mi>3000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Global middlewares */</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cors</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Routes */</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s2>&#34;/pets&#34;</span><span class=p>,</span> <span class=nx>petRoutes</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Server setup */</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>!==</span> <span class=s2>&#34;test&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=nx>port</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`⚡️[server]: Server is running at https://localhost:</span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>app</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>This would be the <strong>application layer</strong> of our project.</p><p>Here we&rsquo;re basically setting up our server and declaring that any request that hits the <code>/pets</code> direction should use the routes (endpoints) we have declared in the <code>./pets/routes/pets.routes.js</code> directory.</p><p>Next, go ahead and create this folder structure in your project:</p><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-246.png width=373 height=113 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-246_hu65530cf66c22a0194923deadf183309c_3338_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-246_hu65530cf66c22a0194923deadf183309c_3338_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-246_hu65530cf66c22a0194923deadf183309c_3338_1024x0_resize_box_3.png 1024w" loading=lazy alt="Folder structure" class=gallery-image data-flex-grow=330 data-flex-basis=792px></p><h3 id=routes>Routes</h3><p>Hop on to the routes folder, create a file called <code>pets.routes.js</code>, and drop this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=nx>from</span> <span class=s2>&#34;express&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>listPets</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>getPet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>editPet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>addPet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>deletePet</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;../controllers/pets.controllers.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>express</span><span class=p>.</span><span class=nx>Router</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span> <span class=nx>listPets</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/:id&#34;</span><span class=p>,</span> <span class=nx>getPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=s2>&#34;/:id&#34;</span><span class=p>,</span> <span class=nx>editPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span> <span class=nx>addPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=s2>&#34;/:id&#34;</span><span class=p>,</span> <span class=nx>deletePet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>router</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>In this file we&rsquo;re initializing a router (the thing that processes our request and directs them accordingly given the endpoint URL) and setting up each of our endpoints.</p><p>See that for each endpoint we declare the corresponding HTTP method (<code>get</code>, <code>put</code>, and so on) and the corresponding function that that endpoint will trigger (<code>listPets</code>, <code>getPet</code>, and so on). Each function name is quite explicit so we can easily know what each endpoint does without needing to see further code. ;)</p><p>Lastly, we also declare which endpoint will receive URL parameters on the requests like this: <code>router.get("/:id", getPet);</code> Here we&rsquo;re saying that we&rsquo;ll receive the <code>id</code> of the pet as an URL parameter.</p><h3 id=controllers>Controllers</h3><p>Now go to the controllers folder, create a <code>pets.controllers.js</code> file, and put this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>getItem</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>listItems</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>editItem</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>addItem</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>deleteItem</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;../models/pets.models.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>getPet</span> <span class=o>=</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>resp</span> <span class=o>=</span> <span class=nx>getItem</span><span class=p>(</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>(</span><span class=nx>resp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>listPets</span> <span class=o>=</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>resp</span> <span class=o>=</span> <span class=nx>listItems</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>(</span><span class=nx>resp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>editPet</span> <span class=o>=</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>resp</span> <span class=o>=</span> <span class=nx>editItem</span><span class=p>(</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>),</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>(</span><span class=nx>resp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>addPet</span> <span class=o>=</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>resp</span> <span class=o>=</span> <span class=nx>addItem</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>(</span><span class=nx>resp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>deletePet</span> <span class=o>=</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>resp</span> <span class=o>=</span> <span class=nx>deleteItem</span><span class=p>(</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>(</span><span class=nx>resp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>Controllers are the functions that each endpoint request will trigger. As you can see, they receive as parameters the request and response objects. In the request object we can read things such as URL or body parameters, and we&rsquo;ll use the response object to send our response after doing the corresponding computation.</p><p>Each controller calls a specific function defined in our models.</p><h3 id=models>Models</h3><p>Now go to the models folder and create a <code>pets.models.js</code> file with this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>db</span> <span class=nx>from</span> <span class=s2>&#34;../../db/db.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>getItem</span> <span class=o>=</span> <span class=p>(</span><span class=nx>id</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>pet</span> <span class=o>=</span> <span class=nx>db</span><span class=o>?</span><span class=p>.</span><span class=nx>pets</span><span class=o>?</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>pet</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>id</span> <span class=o>===</span> <span class=nx>id</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pet</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Error&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>listItems</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>db</span><span class=o>?</span><span class=p>.</span><span class=nx>pets</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Error&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>editItem</span> <span class=o>=</span> <span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>data</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>index</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>((</span><span class=nx>pet</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>pet</span><span class=p>.</span><span class=nx>id</span> <span class=o>===</span> <span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>index</span> <span class=o>===</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;Pet not found&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>[</span><span class=nx>index</span><span class=p>]</span> <span class=o>=</span> <span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>[</span><span class=nx>index</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Error&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>addItem</span> <span class=o>=</span> <span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>newPet</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>.</span><span class=nx>length</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=p>...</span><span class=nx>data</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>newPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>newPet</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Error&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>deleteItem</span> <span class=o>=</span> <span class=p>(</span><span class=nx>id</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// delete item from db
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>index</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>((</span><span class=nx>pet</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>pet</span><span class=p>.</span><span class=nx>id</span> <span class=o>===</span> <span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>index</span> <span class=o>===</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;Pet not found&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>pets</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>These are the functions responsible for interacting with our data layer (database) and returning the corresponding information to our controllers.</p><h3 id=database>Database</h3><p>We wont use a real database for this example. Instead we&rsquo;ll just use a simple array that will work just fine for example purposes, though our data will of course reset every time our server does.</p><p>In the root of our project, create a <code>db</code> folder and a <code>db.js</code> file with this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>db</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>pets</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Rex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dog&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;labrador&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Fido&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dog&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;poodle&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Mittens&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;tabby&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>db</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, our <code>db</code> object contains a <code>pets</code> property whose value is an array of objects, each object being a pet. For each pet, we store an id, name, type, age and breed.</p><p>Now go to your terminal and run <code>nodemon app.js</code>. You should see this message confirming your server is alive: <code>⚡️[server]: Server is running at [https://localhost:3000](https://localhost:3000)</code>.</p><h2 id=how-to-test-a-rest-api-with-supertest>How to Test a REST API with Supertest</h2><p>Now that our server is up and running, let&rsquo;s implement a simple test suit to check if each of our endpoints behaves as expected.</p><p>If you&rsquo;re not familiar with automated testing, I recommend you read <a href=https://www.freecodecamp.org/news/test-a-react-app-with-jest-testing-library-and-cypress/>this introductory article I wrote a while ago</a>.</p><h3 id=our-tools-to-test>Our tools to test</h3><p><a href=https://www.npmjs.com/package/supertest><strong>SuperTest</strong></a> is a JavaScript library that is used for testing HTTP servers or web applications that make HTTP requests. It provides a high-level abstraction for testing HTTP, allowing developers to send HTTP requests and make assertions about the responses received, making it easier to write automated tests for web applications.</p><p>SuperTest works with any JavaScript testing framework, such as <a href=https://mochajs.org/>Mocha</a> or <a href=https://jestjs.io/>Jest</a>, and can be used with any HTTP server or web application framework, such as Express.</p><p>SuperTest is built on top of the popular testing library Mocha, and uses the <a href=https://www.chaijs.com/>Chai</a> assertion library to make assertions about the responses received. It provides an easy-to-use API for making HTTP requests, including support for authentication, headers, and request bodies.</p><p>SuperTest also allows developers to test the entire request/response cycle, including middleware and error handling, making it a powerful tool for testing web applications.</p><p>Overall, SuperTest is a valuable tool for developers who want to write automated tests for their web applications. It helps ensure that their applications are functioning correctly and that any changes they make to the codebase do not introduce new bugs or issues.</p><h3 id=the-code-to-test>The code to test</h3><p>First we&rsquo;ll need to install some dependencies. To save up terminal commands, go to your <code>package.json</code> file and replace your <code>devDependencies</code> section with this. Then run <code>npm install</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl>      <span class=s2>&#34;devDependencies&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;@babel/core&#34;</span><span class=p>:</span> <span class=s2>&#34;^7.21.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;@babel/preset-env&#34;</span><span class=p>:</span> <span class=s2>&#34;^7.21.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;babel-jest&#34;</span><span class=p>:</span> <span class=s2>&#34;^29.5.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;jest&#34;</span><span class=p>:</span> <span class=s2>&#34;^29.5.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;jest-babel&#34;</span><span class=p>:</span> <span class=s2>&#34;^1.0.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;nodemon&#34;</span><span class=p>:</span> <span class=s2>&#34;^2.0.22&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;supertest&#34;</span><span class=p>:</span> <span class=s2>&#34;^6.3.3&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we&rsquo;re installing the <code>supertest</code> and <code>jest</code> libraries, which we need for our tests to run, plus some <code>babel</code> stuff we need for our project to correctly identify which files are test files.</p><p>Still in your <code>package.json</code>, add this script:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl>      <span class=s2>&#34;scripts&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;test&#34;</span><span class=p>:</span> <span class=s2>&#34;jest&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span><span class=err>,</span>
</span></span></code></pre></td></tr></table></div></div><p>To end with the boilerplate, in the root of your project, create a <code>babel.config.cjs</code> file and drop this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>//babel.config.cjs
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>presets</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;@babel/preset-env&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>targets</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>node</span><span class=o>:</span> <span class=s2>&#34;current&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>Now let&rsquo;s write some actual tests! Within your routes folder, create a <code>pets.test.js</code> file with this code in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>supertest</span> <span class=nx>from</span> <span class=s2>&#34;supertest&#34;</span><span class=p>;</span> <span class=c1>// Import supertest
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>server</span> <span class=nx>from</span> <span class=s2>&#34;../../app&#34;</span><span class=p>;</span> <span class=c1>// Import the server object
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>requestWithSupertest</span> <span class=o>=</span> <span class=nx>supertest</span><span class=p>(</span><span class=nx>server</span><span class=p>);</span> <span class=c1>// We will use this function to mock HTTP requests
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;GET &#34;/&#34;&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>test</span><span class=p>(</span><span class=s1>&#39;GET &#34;/&#34; returns all pets&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>requestWithSupertest</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/pets&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>type</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>expect</span><span class=p>.</span><span class=nx>stringContaining</span><span class=p>(</span><span class=s2>&#34;json&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Rex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dog&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;labrador&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Fido&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dog&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;poodle&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Mittens&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;tabby&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;GET &#34;/:id&#34;&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>test</span><span class=p>(</span><span class=s1>&#39;GET &#34;/:id&#34; returns given pet&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>requestWithSupertest</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/pets/1&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>type</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>expect</span><span class=p>.</span><span class=nx>stringContaining</span><span class=p>(</span><span class=s2>&#34;json&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Rex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dog&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;labrador&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;PUT &#34;/:id&#34;&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>test</span><span class=p>(</span><span class=s1>&#39;PUT &#34;/:id&#34; updates pet and returns it&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>requestWithSupertest</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=s2>&#34;/pets/1&#34;</span><span class=p>).</span><span class=nx>send</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Rexo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dogo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;doberman&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>type</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>expect</span><span class=p>.</span><span class=nx>stringContaining</span><span class=p>(</span><span class=s2>&#34;json&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Rexo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dogo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;doberman&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;POST &#34;/&#34;&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>test</span><span class=p>(</span><span class=s1>&#39;POST &#34;/&#34; adds new pet and returns the added item&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>requestWithSupertest</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s2>&#34;/pets&#34;</span><span class=p>).</span><span class=nx>send</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Salame&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>6</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;pinky&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>type</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>expect</span><span class=p>.</span><span class=nx>stringContaining</span><span class=p>(</span><span class=s2>&#34;json&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Salame&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>6</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;pinky&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;DELETE &#34;/:id&#34;&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>test</span><span class=p>(</span><span class=s1>&#39;DELETE &#34;/:id&#34; deletes given pet and returns updated list&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>requestWithSupertest</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=s2>&#34;/pets/2&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>type</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>expect</span><span class=p>.</span><span class=nx>stringContaining</span><span class=p>(</span><span class=s2>&#34;json&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Rexo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;dogo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;doberman&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Mittens&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;tabby&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Salame&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=mi>6</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=s2>&#34;pinky&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>For each endpoint, the tests send HTTP requests and check the responses for three things: the HTTP status code, the response type (which should be JSON), and the response body (which should match the expected JSON format).</p><ul><li>The first test sends a GET request to the /pets endpoint and expects the API to return an array of pets in JSON format.</li><li>The second test sends a GET request to the /pets/:id endpoint and expects the API to return the pet with the specified ID in JSON format.</li><li>The third test sends a PUT request to the /pets/:id endpoint and expects the API to update the pet with the specified ID and return the updated pet in JSON format.</li><li>The fourth test sends a POST request to the /pets endpoint and expects the API to add a new pet and return the added pet in JSON format.</li><li>Finally, the fifth test sends a DELETE request to the /pets/:id endpoint and expects the API to remove the pet with the specified ID and return the updated list of pets in JSON format.</li></ul><p>Each test checks whether the expected HTTP status code, response type, and response body are returned. If any of these expectations are not met, the test fails and provides an error message.</p><p>These tests are important for ensuring that the API is working correctly and consistently across different HTTP requests and endpoints. The tests can be run automatically, which makes it easy to detect any issues or regressions in the API&rsquo;s functionality.</p><p>Now go to your terminal, run <code>npm test</code>, and you should see all your tests passing:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>    &gt; restapi@1.0.0 <span class=nb>test</span>
</span></span><span class=line><span class=cl>    &gt; jest
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>     PASS  pets/routes/pets.test.js
</span></span><span class=line><span class=cl>      GET <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>        ✓ GET <span class=s2>&#34;/&#34;</span> returns all pets <span class=o>(</span><span class=m>25</span> ms<span class=o>)</span>
</span></span><span class=line><span class=cl>      GET <span class=s2>&#34;/:id&#34;</span>
</span></span><span class=line><span class=cl>        ✓ GET <span class=s2>&#34;/:id&#34;</span> returns given pet <span class=o>(</span><span class=m>4</span> ms<span class=o>)</span>
</span></span><span class=line><span class=cl>      PUT <span class=s2>&#34;/:id&#34;</span>
</span></span><span class=line><span class=cl>        ✓ PUT <span class=s2>&#34;/:id&#34;</span> updates pet and returns it <span class=o>(</span><span class=m>15</span> ms<span class=o>)</span>
</span></span><span class=line><span class=cl>      POST <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>        ✓ POST <span class=s2>&#34;/&#34;</span> adds new pet and returns the added item <span class=o>(</span><span class=m>3</span> ms<span class=o>)</span>
</span></span><span class=line><span class=cl>      DELETE <span class=s2>&#34;/:id&#34;</span>
</span></span><span class=line><span class=cl>        ✓ DELETE <span class=s2>&#34;/:id&#34;</span> deletes given pet and returns updated list <span class=o>(</span><span class=m>3</span> ms<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Test Suites: <span class=m>1</span> passed, <span class=m>1</span> total
</span></span><span class=line><span class=cl>    Tests:       <span class=m>5</span> passed, <span class=m>5</span> total
</span></span><span class=line><span class=cl>    Snapshots:   <span class=m>0</span> total
</span></span><span class=line><span class=cl>    Time:        1.611 s
</span></span><span class=line><span class=cl>    Ran all <span class=nb>test</span> suites.
</span></span></code></pre></td></tr></table></div></div><h2 id=how-to-consume-a-rest-api-on-a-front-end-react-app>How to Consume a REST API on a Front-end React App</h2><p>Now we know our server is running and our endpoints are behaving as expected. Let&rsquo;s see some more realistic example of how our API might be consumed by a front end app.</p><p>For this example, we&rsquo;ll use a React application, and two different tools to send and process our requests: the Fetch API and the Axios library.</p><h3 id=our-frontend-tools>Our frontend tools</h3><p><strong><a href=https://react.dev/>React</a></strong> is a popular JavaScript library for building user interfaces. It allows developers to create reusable UI components and efficiently update and render them in response to changes in application state.</p><p>The <strong>Fetch API</strong> is a modern browser API that allows developers to make asynchronous HTTP requests from client-side JavaScript code. It provides a simple interface for fetching resources across the network, and supports a variety of request and response types.</p><p><strong><a href=https://axios-http.com/docs/intro>Axios</a></strong> is a popular HTTP client library for JavaScript. It provides a simple and intuitive API for making HTTP requests, and supports a wide range of features, including request and response interception, automatic transforms for request and response data, and the ability to cancel requests. It can be used both in the browser and on the server, and is often used in conjunction with React applications.</p><h3 id=the-frontend-code>The frontend code</h3><p>Let&rsquo;s create our React app by running <code>yarn create vite</code> and following the terminal prompts. Once that&rsquo;s done, run <code>yarn add axios</code> and <code>yarn add react-router-dom</code> (which we&rsquo;ll use to setup basic routing in our app).</p><h3 id=appjsx>App.jsx</h3><p>Put this code within your <code>App.jsx</code> file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Suspense</span><span class=p>,</span> <span class=nx>lazy</span><span class=p>,</span> <span class=nx>useState</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>BrowserRouter</span> <span class=nx>as</span> <span class=nx>Router</span><span class=p>,</span> <span class=nx>Routes</span><span class=p>,</span> <span class=nx>Route</span><span class=p>,</span> <span class=nx>Link</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react-router-dom&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;./App.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PetList</span> <span class=o>=</span> <span class=nx>lazy</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s2>&#34;./pages/PetList&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PetDetail</span> <span class=o>=</span> <span class=nx>lazy</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s2>&#34;./pages/PetDetail&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>EditPet</span> <span class=o>=</span> <span class=nx>lazy</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s2>&#34;./pages/EditPet&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>AddPet</span> <span class=o>=</span> <span class=nx>lazy</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s2>&#34;./pages/AddPet&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>App</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petToEdit</span><span class=p>,</span> <span class=nx>setPetToEdit</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;App&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>Router</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>shelter</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>Link</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;/add&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>button</span><span class=o>&gt;</span><span class=nx>Add</span> <span class=k>new</span> <span class=nx>pet</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/Link&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>Routes</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Route</span>
</span></span><span class=line><span class=cl>            <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nx>element</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>Suspense</span> <span class=nx>fallback</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>PetList</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=err>/Suspense&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Route</span>
</span></span><span class=line><span class=cl>            <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/:petId&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nx>element</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>Suspense</span> <span class=nx>fallback</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>PetDetail</span> <span class=nx>setPetToEdit</span><span class=o>=</span><span class=p>{</span><span class=nx>setPetToEdit</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=err>/Suspense&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Route</span>
</span></span><span class=line><span class=cl>            <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/:petId/edit&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nx>element</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>Suspense</span> <span class=nx>fallback</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>EditPet</span> <span class=nx>petToEdit</span><span class=o>=</span><span class=p>{</span><span class=nx>petToEdit</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=err>/Suspense&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Route</span>
</span></span><span class=line><span class=cl>            <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/add&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nx>element</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>Suspense</span> <span class=nx>fallback</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>AddPet</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=err>/Suspense&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/Routes&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/Router&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>App</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we&rsquo;re just defining our routes. We&rsquo;ll have 4 main routes in our app, each corresponding to a different view:</p><ul><li>One to see the whole list of pets.</li><li>One to see the detail of a single pet.</li><li>One to edit a single pet.</li><li>One to add a new pet to the list.</li></ul><p>Besides, we have a button to add a new pet and a state that will store the information of the pet we want to edit.</p><p>Next, create a <code>pages</code> directory with these files in it:</p><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-281.png width=376 height=157 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-281_hue15f1efb43f833be526cbcd998ab0e19_5522_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-281_hue15f1efb43f833be526cbcd998ab0e19_5522_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-281_hue15f1efb43f833be526cbcd998ab0e19_5522_1024x0_resize_box_3.png 1024w" loading=lazy alt="Folder structure" class=gallery-image data-flex-grow=239 data-flex-basis=574px></p><h3 id=petlistjsx>PetList.jsx</h3><p>Let&rsquo;s start with the file responsible for rendering the whole list of pets:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useEffect</span><span class=p>,</span> <span class=nx>useState</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Link</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react-router-dom&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s2>&#34;axios&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>PetList</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>pets</span><span class=p>,</span> <span class=nx>setPets</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>([]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>getPets</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=cm>/* FETCH */</span>
</span></span><span class=line><span class=cl>      <span class=c1>// const response = await fetch(&#39;http://localhost:3000/pets&#39;)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// const data = await response.json()
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// if (response.status === 200) setPets(data)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>      <span class=cm>/* AXIOS */</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;http://localhost:3000/pets&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=nx>setPets</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>getPets</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>List</span><span class=o>&lt;</span><span class=err>/h2&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>pets</span><span class=o>?</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>pet</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>p</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=p>{</span><span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span> <span class=o>-</span> <span class=p>{</span><span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>type</span><span class=p>}</span> <span class=o>-</span> <span class=p>{</span><span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>breed</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/p&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>Link</span> <span class=nx>to</span><span class=o>=</span><span class=p>{</span><span class=sb>`/</span><span class=si>${</span><span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>button</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>detail</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/Link&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>})}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>PetList</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, logic-wise we have 3 main things here:</p><ul><li>A state that stores the list of pets to render.</li><li>A function that executes the corresponding request to our API.</li><li>A useEffect that executes that function when the component renders.</li></ul><p>You can see that the syntax for making the HTTP request with fetch and Axios is rather similar, but Axios is a tiny bit more succinct. Once we make the request, we check if the status is 200 (meaning it was successful), and store the response in our state.</p><p>Once our state is updated, the component will render the data provided by our API.</p><blockquote><p>Remember that to make calls to our server, we must have it up and running by running <code>nodemon app.js</code> in our server project terminal.</p></blockquote><h3 id=petdetailjsx>PetDetail.jsx</h3><p>Now let&rsquo;s go to the <code>PetDetail.jsx</code> file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useEffect</span><span class=p>,</span> <span class=nx>useState</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useParams</span><span class=p>,</span> <span class=nx>Link</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react-router-dom&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s2>&#34;axios&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>PetDetail</span><span class=p>({</span> <span class=nx>setPetToEdit</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>pet</span><span class=p>,</span> <span class=nx>setPet</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>([]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>petId</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useParams</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>getPet</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=cm>/* FETCH */</span>
</span></span><span class=line><span class=cl>      <span class=c1>// const response = await fetch(`http://localhost:3000/pets/${petId}`)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// const data = await response.json()
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// if (response.status === 200) {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     setPet(data)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     setPetToEdit(data)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>      <span class=cm>/* AXIOS */</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`http://localhost:3000/pets/</span><span class=si>${</span><span class=nx>petId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>setPet</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>setPetToEdit</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>getPet</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>deletePet</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=cm>/* FETCH */</span>
</span></span><span class=line><span class=cl>      <span class=c1>// const response = await fetch(`http://localhost:3000/pets/${petId}`, {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     method: &#39;DELETE&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// })
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>      <span class=cm>/* AXIOS */</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=sb>`http://localhost:3000/pets/</span><span class=si>${</span><span class=nx>petId</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>href</span> <span class=o>=</span> <span class=s2>&#34;/&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span>
</span></span><span class=line><span class=cl>      <span class=nx>style</span><span class=o>=</span><span class=p>{{</span>
</span></span><span class=line><span class=cl>        <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>justifyContent</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>aligniItems</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>Detail</span><span class=o>&lt;</span><span class=err>/h2&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>pet</span> <span class=o>&amp;&amp;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>p</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>name</span><span class=o>:</span> <span class=p>{</span><span class=nx>pet</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/p&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>p</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>type</span><span class=o>:</span> <span class=p>{</span><span class=nx>pet</span><span class=p>.</span><span class=nx>type</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/p&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>p</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>age</span><span class=o>:</span> <span class=p>{</span><span class=nx>pet</span><span class=p>.</span><span class=nx>age</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/p&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>p</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>breed</span><span class=o>:</span> <span class=p>{</span><span class=nx>pet</span><span class=p>.</span><span class=nx>breed</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/p&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>div</span>
</span></span><span class=line><span class=cl>            <span class=nx>style</span><span class=o>=</span><span class=p>{{</span>
</span></span><span class=line><span class=cl>              <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>justifyContent</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>aligniItems</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>}}</span>
</span></span><span class=line><span class=cl>          <span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>Link</span> <span class=nx>to</span><span class=o>=</span><span class=p>{</span><span class=sb>`/</span><span class=si>${</span><span class=nx>pet</span><span class=o>?</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>/edit`</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>marginRight</span><span class=o>:</span> <span class=mi>10</span> <span class=p>}}</span><span class=o>&gt;</span><span class=nx>Edit</span> <span class=nx>pet</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/Link&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>marginLeft</span><span class=o>:</span> <span class=mi>10</span> <span class=p>}}</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>deletePet</span><span class=p>()}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nx>Delete</span> <span class=nx>pet</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>)}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>PetDetail</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we have two different kind of requests:</p><ul><li>One that gets the information of the given pet (which behaves very similar to the previous request we saw). The only difference here is we&rsquo;re passing an URL parameter to our endpoint, which at the same time we&rsquo;re reading from the URL in our front-end app.</li><li>The other request is to delete the given pet from our register. The difference here is once we confirm that the request was successful, we redirect the user to the root of our app.</li></ul><h3 id=addpetjsx>AddPet.jsx</h3><p>This is the file responsible for adding a new pet to our register:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useState</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s2>&#34;axios&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>AddPet</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petName</span><span class=p>,</span> <span class=nx>setPetName</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petType</span><span class=p>,</span> <span class=nx>setPetType</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petAge</span><span class=p>,</span> <span class=nx>setPetAge</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petBreed</span><span class=p>,</span> <span class=nx>setPetBreed</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>addPet</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>petData</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=nx>petName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=nx>petType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=nx>petAge</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=nx>petBreed</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=cm>/* FETCH */</span>
</span></span><span class=line><span class=cl>      <span class=c1>// const response = await fetch(&#39;http://localhost:3000/pets/&#39;, {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     method: &#39;POST&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     headers: {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//         &#39;Content-Type&#39;: &#39;application/json&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     },
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     body: JSON.stringify(petData)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// })
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>      <span class=c1>// if (response.status === 200) {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     const data = await response.json()
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     window.location.href = `/${data.id}`
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>      <span class=cm>/* AXIOS */</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;http://localhost:3000/pets/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>petData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;Content-Type&#34;</span><span class=o>:</span> <span class=s2>&#34;application/json&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>href</span> <span class=o>=</span> <span class=sb>`/</span><span class=si>${</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span>
</span></span><span class=line><span class=cl>      <span class=nx>style</span><span class=o>=</span><span class=p>{{</span>
</span></span><span class=line><span class=cl>        <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>justifyContent</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>aligniItems</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Add</span> <span class=nx>Pet</span><span class=o>&lt;</span><span class=err>/h2&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>name</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petName</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetName</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>type</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petType</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetType</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>age</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petAge</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetAge</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>breed</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petBreed</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetBreed</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>marginTop</span><span class=o>:</span> <span class=mi>30</span> <span class=p>}}</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>addPet</span><span class=p>()}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>Add</span> <span class=nx>pet</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>AddPet</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we&rsquo;re rendering a form in which the user has to enter the new pet info.</p><p>We have a state for each piece of information to enter, and in our request we build an object with each state. This object will be the body of our request.</p><p>On our request, we check if the response is successful. If it is, we redirect to the detail page of the newly added pet. To redirect, we use the <code>id</code> returned in the HTTP response. ;)</p><h3 id=editpetjsx>EditPet.jsx</h3><p>Finally, the file responsible for editing a pet register:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span><span class=lnt>96
</span><span class=lnt>97
</span><span class=lnt>98
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useState</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s2>&#34;axios&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>EditPet</span><span class=p>({</span> <span class=nx>petToEdit</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petName</span><span class=p>,</span> <span class=nx>setPetName</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>petToEdit</span><span class=o>?</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petType</span><span class=p>,</span> <span class=nx>setPetType</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>petToEdit</span><span class=o>?</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petAge</span><span class=p>,</span> <span class=nx>setPetAge</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>petToEdit</span><span class=o>?</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>petBreed</span><span class=p>,</span> <span class=nx>setPetBreed</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>petToEdit</span><span class=o>?</span><span class=p>.</span><span class=nx>breed</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>editPet</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>petData</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=nx>petToEdit</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=nx>petName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=nx>petType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>age</span><span class=o>:</span> <span class=nx>petAge</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>breed</span><span class=o>:</span> <span class=nx>petBreed</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=cm>/* FETCH */</span>
</span></span><span class=line><span class=cl>      <span class=c1>// const response = await fetch(`http://localhost:3000/pets/${petToEdit.id}`, {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     method: &#39;PUT&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     headers: {
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//         &#39;Content-Type&#39;: &#39;application/json&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     },
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//     body: JSON.stringify(petData)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// })
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>      <span class=cm>/* AXIOS */</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=sb>`http://localhost:3000/pets/</span><span class=si>${</span><span class=nx>petToEdit</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>petData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;Content-Type&#34;</span><span class=o>:</span> <span class=s2>&#34;application/json&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>href</span> <span class=o>=</span> <span class=sb>`/</span><span class=si>${</span><span class=nx>petToEdit</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span>
</span></span><span class=line><span class=cl>      <span class=nx>style</span><span class=o>=</span><span class=p>{{</span>
</span></span><span class=line><span class=cl>        <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>justifyContent</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>aligniItems</span><span class=o>:</span> <span class=s2>&#34;center&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Edit</span> <span class=nx>Pet</span><span class=o>&lt;</span><span class=err>/h2&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>name</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petName</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetName</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>type</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petType</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetType</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>age</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petAge</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetAge</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>display</span><span class=o>:</span> <span class=s2>&#34;flex&#34;</span><span class=p>,</span> <span class=nx>flexDirection</span><span class=o>:</span> <span class=s2>&#34;column&#34;</span><span class=p>,</span> <span class=nx>margin</span><span class=o>:</span> <span class=mi>20</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span><span class=nx>Pet</span> <span class=nx>breed</span><span class=o>&lt;</span><span class=err>/label&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>petBreed</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setPetBreed</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>marginTop</span><span class=o>:</span> <span class=mi>30</span> <span class=p>}}</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>editPet</span><span class=p>()}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>Save</span> <span class=nx>changes</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>EditPet</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>This behaves very similar to the <code>AddPet.jsx</code> file. The only difference is that our pet info states are initialized with the values of the pet we want to edit. When those values are updated by the user, we construct an object that will be our request body and send the request with the updated information. Quite straightforward. ;)</p><p>And that&rsquo;s it! We&rsquo;re using all of our API endpoints in our front end app. =)</p><h2 id=how-to-document-a-rest-api-with-swagger>How to Document a REST API with Swagger</h2><p>Now that we have our server up and running, tested, and connected to our front end app, the last step in our implementation will be to document our API.</p><p>Documenting and API generally means declaring which endpoints are available, what actions are performed by each endpoint, and the parameters and return values for each of them.</p><p>This is useful not only to remember how our server works, but also for people who want to interact with our API.</p><p>For example, in companies it&rsquo;s very usual to have back-end teams and front-end teams. When an API is being developed and needs to be integrated with a front-end app, it would be very tedious to ask which endpoint does what, and what parameters should be passed. If you have all that info in a singe place, you can just go there and read it yourself. That&rsquo;s what documentation is.</p><h3 id=our-tools-for-swagger>Our tools for Swagger</h3><p><strong><a href=https://swagger.io/>Swagger</a></strong> is a set of open-source tools that help developers build, document, and consume RESTful web services. It provides a user-friendly graphical interface for users to interact with an API and also generates client code for various programming languages to make API integration easier.</p><p>Swagger provides a comprehensive set of features for API development, including API design, documentation, testing, and code generation. It allows developers to define API endpoints, input parameters, expected output, and authentication requirements in a standardized way using the OpenAPI specification.</p><p>Swagger UI is a popular tool that renders OpenAPI specifications as an interactive API documentation that allows developers to explore and test APIs through a web browser. It provides a user-friendly interface that allows developers to easily view and interact with API endpoints.</p><h3 id=how-to-implement-swagger>How to Implement Swagger</h3><p>Back in our server app, to implement Swagger we&rsquo;ll need two new dependencies. So run <code>npm i swagger-jsdoc</code> and <code>npm i swagger-ui-express</code>.</p><p>Next, modify the <code>app.js</code> file to look like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=nx>from</span> <span class=s2>&#34;express&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>cors</span> <span class=nx>from</span> <span class=s2>&#34;cors&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>swaggerUI</span> <span class=nx>from</span> <span class=s2>&#34;swagger-ui-express&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>swaggerJSdoc</span> <span class=nx>from</span> <span class=s2>&#34;swagger-jsdoc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>petRoutes</span> <span class=nx>from</span> <span class=s2>&#34;./pets/routes/pets.routes.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>port</span> <span class=o>=</span> <span class=mi>3000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// swagger definition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>swaggerSpec</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>definition</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>openapi</span><span class=o>:</span> <span class=s2>&#34;3.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>info</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;Pets API&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>version</span><span class=o>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>servers</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>url</span><span class=o>:</span> <span class=sb>`http://localhost:</span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>apis</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;./pets/routes/*.js&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Global middlewares */</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cors</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;/api-docs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>swaggerUI</span><span class=p>.</span><span class=nx>serve</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>swaggerUI</span><span class=p>.</span><span class=nx>setup</span><span class=p>(</span><span class=nx>swaggerJSdoc</span><span class=p>(</span><span class=nx>swaggerSpec</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Routes */</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s2>&#34;/pets&#34;</span><span class=p>,</span> <span class=nx>petRoutes</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Server setup */</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>!==</span> <span class=s2>&#34;test&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=nx>port</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`⚡️[server]: Server is running at https://localhost:</span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>app</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, we&rsquo;re importing the new dependencies, we&rsquo;re creating a <code>swaggerSpec</code> object that contains config options for our implementation, and then setting a middleware to render our documentation in the <code>/api-docs</code> directory of our app.</p><p>By now, if you open your browser and go to <a href=http://localhost:3000/api-docs/><code>http://localhost:3000/api-docs/</code></a> you should see this:</p><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-325.png width=1540 height=717 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-325_huab7254ed4b01c7114f2c2d9aa930df09_19794_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-325_huab7254ed4b01c7114f2c2d9aa930df09_19794_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-325_huab7254ed4b01c7114f2c2d9aa930df09_19794_1024x0_resize_box_3.png 1024w" loading=lazy alt="Documentation UI" class=gallery-image data-flex-grow=214 data-flex-basis=515px></p><p>The cool thing about Swagger is it provides an out-of-the-box UI for our docs, and you can easily access it in the URL path declared in the config.</p><p>Now let&rsquo;s write some actual documentation!</p><p>Hop on to the <code>pets.routes.js</code> file and replace its code with this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=nx>from</span> <span class=s2>&#34;express&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>listPets</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>getPet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>editPet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>addPet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>deletePet</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;../controllers/pets.controllers.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>express</span><span class=p>.</span><span class=nx>Router</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @swagger
</span></span></span><span class=line><span class=cl><span class=cm> * components:
</span></span></span><span class=line><span class=cl><span class=cm> *  schemas:
</span></span></span><span class=line><span class=cl><span class=cm> *     Pet:
</span></span></span><span class=line><span class=cl><span class=cm> *      type: object
</span></span></span><span class=line><span class=cl><span class=cm> *      properties:
</span></span></span><span class=line><span class=cl><span class=cm> *          id:
</span></span></span><span class=line><span class=cl><span class=cm> *              type: integer
</span></span></span><span class=line><span class=cl><span class=cm> *              description: Pet id
</span></span></span><span class=line><span class=cl><span class=cm> *          name:
</span></span></span><span class=line><span class=cl><span class=cm> *              type: string
</span></span></span><span class=line><span class=cl><span class=cm> *              description: Pet name
</span></span></span><span class=line><span class=cl><span class=cm> *          age:
</span></span></span><span class=line><span class=cl><span class=cm> *              type: integer
</span></span></span><span class=line><span class=cl><span class=cm> *              description: Pet age
</span></span></span><span class=line><span class=cl><span class=cm> *          type:
</span></span></span><span class=line><span class=cl><span class=cm> *              type: string
</span></span></span><span class=line><span class=cl><span class=cm> *              description: Pet type
</span></span></span><span class=line><span class=cl><span class=cm> *          breed:
</span></span></span><span class=line><span class=cl><span class=cm> *              type: string
</span></span></span><span class=line><span class=cl><span class=cm> *              description: Pet breed
</span></span></span><span class=line><span class=cl><span class=cm> *     example:
</span></span></span><span class=line><span class=cl><span class=cm> *          id: 1
</span></span></span><span class=line><span class=cl><span class=cm> *          name: Rexaurus
</span></span></span><span class=line><span class=cl><span class=cm> *          age: 3
</span></span></span><span class=line><span class=cl><span class=cm> *          breed: labrador
</span></span></span><span class=line><span class=cl><span class=cm> *          type: dog
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @swagger
</span></span></span><span class=line><span class=cl><span class=cm> * /pets:
</span></span></span><span class=line><span class=cl><span class=cm> *  get:
</span></span></span><span class=line><span class=cl><span class=cm> *     summary: Get all pets
</span></span></span><span class=line><span class=cl><span class=cm> *     description: Get all pets
</span></span></span><span class=line><span class=cl><span class=cm> *     responses:
</span></span></span><span class=line><span class=cl><span class=cm> *      200:
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Success
</span></span></span><span class=line><span class=cl><span class=cm> *      500:
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Internal Server Error
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span> <span class=nx>listPets</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @swagger
</span></span></span><span class=line><span class=cl><span class=cm> * /pets/{id}:
</span></span></span><span class=line><span class=cl><span class=cm> *  get:
</span></span></span><span class=line><span class=cl><span class=cm> *     summary: Get pet detail
</span></span></span><span class=line><span class=cl><span class=cm> *     description: Get pet detail
</span></span></span><span class=line><span class=cl><span class=cm> *     parameters:
</span></span></span><span class=line><span class=cl><span class=cm> *       - in: path
</span></span></span><span class=line><span class=cl><span class=cm> *         name: id
</span></span></span><span class=line><span class=cl><span class=cm> *         schema:
</span></span></span><span class=line><span class=cl><span class=cm> *           type: integer
</span></span></span><span class=line><span class=cl><span class=cm> *         required: true
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Pet id
</span></span></span><span class=line><span class=cl><span class=cm> *     responses:
</span></span></span><span class=line><span class=cl><span class=cm> *      200:
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Success
</span></span></span><span class=line><span class=cl><span class=cm> *      500:
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Internal Server Error
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/:id&#34;</span><span class=p>,</span> <span class=nx>getPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @swagger
</span></span></span><span class=line><span class=cl><span class=cm> * /pets/{id}:
</span></span></span><span class=line><span class=cl><span class=cm> *  put:
</span></span></span><span class=line><span class=cl><span class=cm> *     summary: Edit pet
</span></span></span><span class=line><span class=cl><span class=cm> *     description: Edit pet
</span></span></span><span class=line><span class=cl><span class=cm> *     parameters:
</span></span></span><span class=line><span class=cl><span class=cm> *       - in: path
</span></span></span><span class=line><span class=cl><span class=cm> *         name: id
</span></span></span><span class=line><span class=cl><span class=cm> *         schema:
</span></span></span><span class=line><span class=cl><span class=cm> *           type: integer
</span></span></span><span class=line><span class=cl><span class=cm> *         required: true
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Pet id
</span></span></span><span class=line><span class=cl><span class=cm> *     requestBody:
</span></span></span><span class=line><span class=cl><span class=cm> *       description: A JSON object containing pet information
</span></span></span><span class=line><span class=cl><span class=cm> *       content:
</span></span></span><span class=line><span class=cl><span class=cm> *         application/json:
</span></span></span><span class=line><span class=cl><span class=cm> *           schema:
</span></span></span><span class=line><span class=cl><span class=cm> *              $ref: &#39;#/components/schemas/Pet&#39;
</span></span></span><span class=line><span class=cl><span class=cm> *           example:
</span></span></span><span class=line><span class=cl><span class=cm> *              name: Rexaurus
</span></span></span><span class=line><span class=cl><span class=cm> *              age: 12
</span></span></span><span class=line><span class=cl><span class=cm> *              breed: labrador
</span></span></span><span class=line><span class=cl><span class=cm> *              type: dog
</span></span></span><span class=line><span class=cl><span class=cm> *     responses:
</span></span></span><span class=line><span class=cl><span class=cm> *     200:
</span></span></span><span class=line><span class=cl><span class=cm> *        description: Success
</span></span></span><span class=line><span class=cl><span class=cm> *     500:
</span></span></span><span class=line><span class=cl><span class=cm> *       description: Internal Server Error
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=s2>&#34;/:id&#34;</span><span class=p>,</span> <span class=nx>editPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @swagger
</span></span></span><span class=line><span class=cl><span class=cm> * /pets:
</span></span></span><span class=line><span class=cl><span class=cm> *  post:
</span></span></span><span class=line><span class=cl><span class=cm> *      summary: Add pet
</span></span></span><span class=line><span class=cl><span class=cm> *      description: Add pet
</span></span></span><span class=line><span class=cl><span class=cm> *      requestBody:
</span></span></span><span class=line><span class=cl><span class=cm> *          description: A JSON object containing pet information
</span></span></span><span class=line><span class=cl><span class=cm> *          content:
</span></span></span><span class=line><span class=cl><span class=cm> *             application/json:
</span></span></span><span class=line><span class=cl><span class=cm> *                 schema:
</span></span></span><span class=line><span class=cl><span class=cm> *                    $ref: &#39;#/components/schemas/Pet&#39;
</span></span></span><span class=line><span class=cl><span class=cm> *                 example:
</span></span></span><span class=line><span class=cl><span class=cm> *                    name: Rexaurus
</span></span></span><span class=line><span class=cl><span class=cm> *                    age: 12
</span></span></span><span class=line><span class=cl><span class=cm> *                    breed: labrador
</span></span></span><span class=line><span class=cl><span class=cm> *                    type: dog
</span></span></span><span class=line><span class=cl><span class=cm> *      responses:
</span></span></span><span class=line><span class=cl><span class=cm> *      200:
</span></span></span><span class=line><span class=cl><span class=cm> *          description: Success
</span></span></span><span class=line><span class=cl><span class=cm> *      500:
</span></span></span><span class=line><span class=cl><span class=cm> *          description: Internal Server Error
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span> <span class=nx>addPet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @swagger
</span></span></span><span class=line><span class=cl><span class=cm> * /pets/{id}:
</span></span></span><span class=line><span class=cl><span class=cm> *  delete:
</span></span></span><span class=line><span class=cl><span class=cm> *     summary: Delete pet
</span></span></span><span class=line><span class=cl><span class=cm> *     description: Delete pet
</span></span></span><span class=line><span class=cl><span class=cm> *     parameters:
</span></span></span><span class=line><span class=cl><span class=cm> *       - in: path
</span></span></span><span class=line><span class=cl><span class=cm> *         name: id
</span></span></span><span class=line><span class=cl><span class=cm> *         schema:
</span></span></span><span class=line><span class=cl><span class=cm> *           type: integer
</span></span></span><span class=line><span class=cl><span class=cm> *         required: true
</span></span></span><span class=line><span class=cl><span class=cm> *         description: Pet id
</span></span></span><span class=line><span class=cl><span class=cm> *     responses:
</span></span></span><span class=line><span class=cl><span class=cm> *     200:
</span></span></span><span class=line><span class=cl><span class=cm> *        description: Success
</span></span></span><span class=line><span class=cl><span class=cm> *     500:
</span></span></span><span class=line><span class=cl><span class=cm> *       description: Internal Server Error
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=s2>&#34;/:id&#34;</span><span class=p>,</span> <span class=nx>deletePet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>router</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, we&rsquo;re adding a special kind of comment for each of our endpoints. This is the way Swagger UI identifies the documentation within our code. We&rsquo;ve put them in this file since it makes sense to have the docs as close to the endpoints as possible, but you could place them wherever you want.</p><p>If we analyze the comments in detail you could see they&rsquo;re written in a YAML like syntax, and for each of them we specify the endpoint route, HTTP method, a description, the parameters it receives and the possible responses.</p><p>All comments are more or less the same except the first one. In that one we&rsquo;re defining a &ldquo;schema&rdquo; which is like a typing to a kind of object we can later on reuse in other comments. In our case, we&rsquo;re defining the &ldquo;Pet&rdquo; schema which we then use for the <code>put</code> and <code>post</code> endpoints.</p><p>If you enter <a href=http://localhost:3000/api-docs/><code>http://localhost:3000/api-docs/</code></a> again, you should now see this:</p><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-327.png width=1593 height=930 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-327_hu782c35522eb6e41c6a0051d89572b5e4_38778_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-327_hu782c35522eb6e41c6a0051d89572b5e4_38778_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-327_hu782c35522eb6e41c6a0051d89572b5e4_38778_1024x0_resize_box_3.png 1024w" loading=lazy alt="Documentation UI" class=gallery-image data-flex-grow=171 data-flex-basis=411px></p><p>Each of the endpoints can be expanded, like this:</p><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-328.png width=1634 height=593 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-328_hub3b4aa44b145828be590455a550429f1_22284_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-328_hub3b4aa44b145828be590455a550429f1_22284_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-328_hub3b4aa44b145828be590455a550429f1_22284_1024x0_resize_box_3.png 1024w" loading=lazy alt="Documentation UI" class=gallery-image data-flex-grow=275 data-flex-basis=661px></p><p>And if we click the &ldquo;Try it out&rdquo; button, we can execute an HTTP request and see what the response looks like:</p><p><img src=/post/2023-07/rest-api-handbook-freecodecamp/images/image-329.png width=1557 height=884 srcset="/post/2023-07/rest-api-handbook-freecodecamp/images/image-329_hu98f8be0f3bc4c1df465b2623424f9652_67659_360x0_resize_box_3.png 360w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-329_hu98f8be0f3bc4c1df465b2623424f9652_67659_600x0_resize_box_3.png 600w, /post/2023-07/rest-api-handbook-freecodecamp/images/image-329_hu98f8be0f3bc4c1df465b2623424f9652_67659_1024x0_resize_box_3.png 1024w" loading=lazy alt="Documentation UI" class=gallery-image data-flex-grow=176 data-flex-basis=422px></p><p>This is really useful for developers in general and people who want to work with our API, and very easy to set up as you can see.</p><p>Having an out-of-the-box UI simplifies the interaction with the documentation. And having it within our codebase as well is a great bonus, as we can modify and update it without the need of touching anything else but our own code.</p><h2 id=wrapping-up>Wrapping Up</h2><p>As always, I hope you enjoyed the handbook and learned something new. If you want, you can also follow me on <a href=https://www.linkedin.com/in/germancocca/>LinkedIn</a> or <a href=https://twitter.com/CoccaGerman>Twitter</a>.</p><p>See you in the next one!</p><div class="jli-notice jli-notice-tip" id="Learn to code for free."><p class=jli-notice-title>Learn to code for free.</p><p>freeCodeCamp&rsquo;s open source curriculum has helped more than 40,000 people get jobs as developers. <a href=https://www.freecodecamp.org/learn/>Get started</a></p></div></section><footer class=article-footer><section class=article-tags><a href=/tags/rest-api/>REST API</a>
<a href=/tags/nodejs/>NodeJS</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/2023-07/how-to-run-a-nodejs-rest-api-on-cloudways/><div class=article-image><img src=/post/2023-07/how-to-run-a-nodejs-rest-api-on-cloudways/images/2023-07-07-nodejs-logo.427a3daf1921c30f0c72125ad0819e14_hu99545c1de27fc49b0ad6952556c7c5ec_30906_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt=" How to run a NodeJS REST API on Cloudways?" data-hash="md5-Qno9rxkhww8MchJa0IGeFA=="></div><div class=article-details><h2 class=article-title>How to run a NodeJS REST API on Cloudways?</h2></div></a></article><article class=has-image><a href=/post/2021-02-12-debugging-in-nodejs-and-vsc/><div class=article-image><img src=/post/2021-02-12-debugging-in-nodejs-and-vsc/_hu69dc43da1ea6544a036eb94bc6781a56_58607_4a5fcb87d03e59053a02929415e72966.jpg width=250 height=150 loading=lazy alt=" How to debug a Nodejs project in VSC" data-hash="md5-+cmCGEL7lh/Vo4+bS1Iqfw=="></div><div class=article-details><h2 class=article-title>How to debug a Nodejs project in VSC</h2></div></a></article><article class=has-image><a href=/post/2024-03/how-to-add-cannonical-url-to-a-hugo-blog/><div class=article-image><img src=/post/2024-03/how-to-add-cannonical-url-to-a-hugo-blog/images/_huc23fe763f5e83a76a1019c115909cb05_477496_a110e9d78b89a4a0740684a3d07b8386.jpg width=250 height=150 loading=lazy alt=" How to add cannonical URL to a Hugo blog?" data-hash="md5-aWO7kA7O/VZrLkgipJRVyQ=="></div><div class=article-details><h2 class=article-title>How to add cannonical URL to a Hugo blog?</h2></div></a></article><article class=has-image><a href=/post/2024-03/extract-arrays-from-a-list-of-objects-into-a-single-array/><div class=article-image><img src=/post/2024-03/extract-arrays-from-a-list-of-objects-into-a-single-array/images/_hu5459c0360c2b0cb7a147d2df0eb350ca_1808319_a31bbc23a7b371f4251f78e939b31a8c.jpg width=250 height=150 loading=lazy alt=" Extract arrays from objects into a single array" data-hash="md5-AbcoQ4mYLXenQ5CaaQFzkg=="></div><div class=article-details><h2 class=article-title>Extract arrays from objects into a single array</h2></div></a></article><article class=has-image><a href=/post/2024-03/build-a-html-friendly-accordeon-without-javascript/><div class=article-image><img src=/post/2024-03/build-a-html-friendly-accordeon-without-javascript/images/_hu1a334ee449fe53106d1da918aba2b14f_732641_33da36e621dddaa379377160ae70f1a5.jpg width=250 height=150 loading=lazy alt=" Building an HTML accordion without JavaScript" data-hash="md5-9Lyg8N4UBsdpzCkK1V36UQ=="></div><div class=article-details><h2 class=article-title>Building an HTML accordion without JavaScript</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2021 -
2024 Jérémie Litzler</section><section class=powerby>License GPLv3 | <a href=https://iamjeremie.me/page/terms title="Read terms and conditions of this website">Terms</a><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.24.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>