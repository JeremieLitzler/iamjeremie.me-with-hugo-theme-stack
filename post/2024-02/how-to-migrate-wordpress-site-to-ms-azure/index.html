<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='I did a migration from InMotion shared hosting to Microsoft Azure in 2023 for a non-profit organization in the US. I learned a lot as a first experience with Microsoft Azure. Here is what I learned and how it went.'><title>How to migrate a WordPress site to Microsoft Azure</title>
<link rel=canonical href=https://iamjeremie.me/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/ itemprop=url><link rel=stylesheet href=/scss/style.min.d8118f156935b64eca93aca758476adca858d2c47354971654d9bd2933a0e45f.css><meta property='og:title' content='How to migrate a WordPress site to Microsoft Azure'><meta property='og:description' content='I did a migration from InMotion shared hosting to Microsoft Azure in 2023 for a non-profit organization in the US. I learned a lot as a first experience with Microsoft Azure. Here is what I learned and how it went.'><meta property='og:url' content='https://iamjeremie.me/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/'><meta property='og:site_name' content='Jérémie Litzler'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Microsoft Azure'><meta property='article:tag' content='WordPress'><meta property='article:published_time' content='2024-02-21T00:00:00+00:00'><meta property='article:modified_time' content='2024-02-21T00:00:00+00:00'><meta property='og:image' content='https://iamjeremie.me/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram.png'><meta name=twitter:title content="How to migrate a WordPress site to Microsoft Azure"><meta name=twitter:description content="I did a migration from InMotion shared hosting to Microsoft Azure in 2023 for a non-profit organization in the US. I learned a lot as a first experience with Microsoft Azure. Here is what I learned and how it went."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://iamjeremie.me/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram.png'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/profilepic-400w_hu0d260670f142c28330b6a3dd6fbeddc8_111803_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><p class=site-name><a href=/>Jérémie Litzler</a></p><p class=site-description>I share my notes and experiences that can be useful to one of you. Enjoy the read!</p></div></header><ol class=social-menu><li><a href=https://github.com/JeremieLitzler target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/LitzlerJeremie target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/page/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>Who am I?</span></a></li><li><a href=/page/sponsor-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart-handshake" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#707070" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572 12 20l-7.5-7.428A5 5 0 1112 6.006a5 5 0 117.5 6.572"/><path d="M12 6 8.707 9.293a1 1 0 000 1.414l.543.543c.69.69 1.81.69 2.5.0l1-1a3.182 3.182.0 014.5.0l2.25 2.25"/><path d="M12.5 15.5l2 2"/><path d="M15 13l2 2"/></svg>
<span>Support my work</span></a></li><li><a href=/page/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/page/contact-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-message-chatbot" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#707070" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 21V8a3 3 0 013-3h10a3 3 0 013 3v6a3 3 0 01-3 3H8l-4 4"/><path d="M9.5 9h.01"/><path d="M14.5 9h.01"/><path d="M9.5 13a3.5 3.5.0 005 0"/></svg>
<span>Let's talk</span></a></li><li><a href=/page/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://iamjeremie.me/ selected></option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#create-the-app-service>Create the app service</a></li><li><a href=#clean-up-the-resources>Clean up the resources</a></li><li><a href=#size-the-resources-correctly>Size the resources correctly</a></li><li><a href=#configure-the-app-service-with-http2>Configure the app service with HTTP/2</a></li><li><a href=#migrate-from-the-shared-hosting-to-microsoft-azure>Migrate from the shared hosting to Microsoft Azure</a></li><li><a href=#cost-for-non-profits-take-advantage-of-microsofts-sponsorship>Cost: for non-profits, take advantage of Microsoft’s sponsorship</a></li><li><a href=#maintenance-and-updates-with-deployment-slots>Maintenance and updates with deployment slots</a><ol><li><a href=#why-deployment-slots>Why deployment slots</a></li><li><a href=#about-backups-in-microsoft-azure>About backups in Microsoft Azure</a></li><li><a href=#use-the-deployment-slots>Use the deployment slots</a></li></ol></li><li><a href=#next-steps>Next steps</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram_hu3ab7efb706468219c54a44979d10b083_87483_600x0_resize_box_3.png srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram_hu3ab7efb706468219c54a44979d10b083_87483_360x0_resize_box_3.png 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram_hu3ab7efb706468219c54a44979d10b083_87483_600x0_resize_box_3.png 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram_hu3ab7efb706468219c54a44979d10b083_87483_1024x0_resize_box_3.png 1024w" width=600 height=263 alt="Image de l'article 'How to migrate a WordPress site to Microsoft Azure'"></a></div><div class=article-details><header class=article-category><a href=/categories/tutorials/>Tutorials</a></header><div class=article-title-wrapper><h1 class=article-title><a href=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/>How to migrate a WordPress site to Microsoft Azure</a></h1><h2 class=article-subtitle>I did a migration from InMotion shared hosting to Microsoft Azure in 2023 for a non-profit organization in the US. I learned a lot as a first experience with Microsoft Azure. Here is what I learned and how it went.</h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 21, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>9 minute read</time></div></footer></div></header><section class=article-content><h2 id=prerequisites>Prerequisites</h2><p>To get started, you need to:</p><ul><li>have an account and a subscription whether it’s a free trial or a non-profit sponsorship on Microsoft Azure.</li><li>be able to access to the source hosting you want to migrate from.</li><li>be able to install the plugin <code>all-in-one wp migration</code>on the source website to migrate its content.</li></ul><h2 id=create-the-app-service>Create the app service</h2><p>The architecture of the WordPress app service on Microsoft Azure is the following:</p><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram-with-highlights.png width=1638 height=717 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram-with-highlights_hu0c0158546072368d1fa0b47dc84effe5_95915_360x0_resize_box_3.png 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram-with-highlights_hu0c0158546072368d1fa0b47dc84effe5_95915_600x0_resize_box_3.png 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/wordpress-app-service-diagram-with-highlights_hu0c0158546072368d1fa0b47dc84effe5_95915_1024x0_resize_box_3.png 1024w" loading=lazy alt="Diagram from Microsoft Learn" class=gallery-image data-flex-grow=228 data-flex-basis=548px></p><p>Credit: image from <a href=https://learn.microsoft.com/en-us/azure/architecture/example-scenario/infrastructure/wordpress-app-service>this article</a> on Microsoft Learn.</p><p>What we will focus the most on will be the <strong>App Service</strong> and the <strong>Azure Database for MySQL flexible server</strong>.</p><p>I will mention the Storage account but I won’t go into the details.</p><p>So, from <a href=https://portal.azure.com/#home>the Portal</a>,</p><ol><li>You select <code>Create a resource</code></li><li>I followed the <a href=https://learn.microsoft.com/en-us/azure/app-service/migrate-wordpress>Microsoft guide on WordPress migration</a> and here are the steps summarized into 5 steps:</li></ol><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-1.jpg width=1920 height=861 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-1_hu7d1e3904949ddf7da0054ae7534645fe_416343_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-1_hu7d1e3904949ddf7da0054ae7534645fe_416343_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-1_hu7d1e3904949ddf7da0054ae7534645fe_416343_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Step 1: select the app service template" class=gallery-image data-flex-grow=222 data-flex-basis=535px></p><div class="jli-notice jli-notice-tip" id=Tip><p class=jli-notice-title>Tip</p><p>Use the official Microsoft App Service option.</p></div><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-2.jpg width=1899 height=1435 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-2_hudc96a6c55382978722c8f86ce65f8319_432845_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-2_hudc96a6c55382978722c8f86ce65f8319_432845_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-2_hudc96a6c55382978722c8f86ce65f8319_432845_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Step 2: define the project, e.g., where is hosted the server, what size it will be and the initial WordPress credentials account." class=gallery-image data-flex-grow=132 data-flex-basis=317px></p><div class="jli-notice jli-notice-tip" id="The importants steps here are:"><p class=jli-notice-title>The importants steps here are:</p><ul><li>creating a new Resource group to organize the resources created, for example with the <code>RG_Websites_Ressources</code>.</li><li>selecting the initial App Service plan size, starting from free.</li></ul><p>NB: if you perform a migration, the initial WordPress credentials account isn’t important since you will override it in later stages.</p></div><div class="jli-notice jli-notice-warning" id="Free tier may be too small for WordPress..."><p class=jli-notice-title>Free tier may be too small for WordPress...</p></div><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-3.jpg width=1912 height=1509 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-3_hu8ec7fb9bd2c262866eb480e17f6a7465_556052_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-3_hu8ec7fb9bd2c262866eb480e17f6a7465_556052_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-3_hu8ec7fb9bd2c262866eb480e17f6a7465_556052_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Step 3: select the addons" class=gallery-image data-flex-grow=126 data-flex-basis=304px></p><div class="jli-notice jli-notice-tip" id="In my case..."><p class=jli-notice-title>In my case...</p><p>I <strong>unchecked everything</strong>, <em>unlike it’s shown in the screenshot</em>.</p><p>If you need to create a storage account, you can do it separately.</p></div><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-4.jpg width=1920 height=530 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-4_hu8ec7fb9bd2c262866eb480e17f6a7465_181828_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-4_hu8ec7fb9bd2c262866eb480e17f6a7465_181828_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-4_hu8ec7fb9bd2c262866eb480e17f6a7465_181828_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Step 4: add a staging slot" class=gallery-image data-flex-grow=362 data-flex-basis=869px></p><div class="jli-notice jli-notice-note" id="This is not necessary right now."><p class=jli-notice-title>This is not necessary right now.</p></div><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-5.jpg width=1920 height=861 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-5_hu8ec7fb9bd2c262866eb480e17f6a7465_222343_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-5_hu8ec7fb9bd2c262866eb480e17f6a7465_222343_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-step-5_hu8ec7fb9bd2c262866eb480e17f6a7465_222343_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Step 5: add tags" class=gallery-image data-flex-grow=222 data-flex-basis=535px></p><div class="jli-notice jli-notice-tip" id=Tagging><p class=jli-notice-title>Tagging</p><p>I think it’s important to tag the resources that you’re about to create.</p></div><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-summary.jpg width=1920 height=1711 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-summary_hu7d1e3904949ddf7da0054ae7534645fe_404886_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-summary_hu7d1e3904949ddf7da0054ae7534645fe_404886_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/create-app-service-with-new-plan-summary_hu7d1e3904949ddf7da0054ae7534645fe_404886_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Summary before creation" class=gallery-image data-flex-grow=112 data-flex-basis=269px></p><div class="jli-notice jli-notice-note"><p class=jli-notice-title></p><p>The creation takes a while. So take a break and come back 15–20 minutes.</p></div><h2 id=clean-up-the-resources>Clean up the resources</h2><p>To view all the resources you’ve just created, go to <a href=https://portal.azure.com/#home>Portal homepage</a> and select <code>Resource groups</code>tile.</p><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/access-resource-group-from-home.jpg width=1396 height=350 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/access-resource-group-from-home_huaea79c5c709c3fb3a875e90223da5611_114193_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/access-resource-group-from-home_huaea79c5c709c3fb3a875e90223da5611_114193_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/access-resource-group-from-home_huaea79c5c709c3fb3a875e90223da5611_114193_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Access the resource groups" class=gallery-image data-flex-grow=398 data-flex-basis=957px></p><p>Then, select the resource group you created earlier, for example <code>RG_Websites_Ressources</code>.</p><p>When you create an app service using the template in the Azure marketplace, it creates a bit too many resources.</p><p>I haven’t noted all the ones that I deleted so let me show you which you need to keep:</p><ul><li>One storage account</li><li>One app service per website</li><li>One database instance per app service</li><li>One virtual network</li></ul><p>If you happen to create several app services using the previous step method, you will end up with a lot of resources.</p><p>Plus, you will have one App Service plan per creation, which may not be something you want. For example, on the project, we’re running 2 app services using a single App Service plan.</p><p>It’s easy to create a new app service from an existing one.</p><p>The only distinct resources you need is an app service and a MySQL server instance (and even that one you could share between app services but I haven’t run into that scenario).</p><h2 id=size-the-resources-correctly>Size the resources correctly</h2><p>The good news is that you can resize the app service and / or the MySQL server after creation. And all it takes is <em>just</em> a few clicks.</p><p>In my case, I had 2 websites and one was significantly larger than the other.</p><p>To modify the size of the app service, simply:</p><ul><li>Browse to the app service resource.</li><li>Select the <code>Scale up (app service Plan)</code> blade.</li><li>Select the desired size.</li><li>Confirm by clicking the <code>Select</code> button.</li></ul><p>To modify the MySQL server resource:</p><ul><li>Browse to the resource.</li><li>Select the <code>Compute + storage</code>blade.</li><li>Select the Compute tier: either <code>Burstable</code>, <code>General Purpose</code> or <code>Business Critical</code>.</li><li>Select the Compute size.</li><li>Adjust the Storage size (minimum of 20 GiB is useful more than enough).</li><li>Adjust the backup settings if needed</li><li>confirm by clicking the <code>Save</code> button</li></ul><h2 id=configure-the-app-service-with-http2>Configure the app service with HTTP/2</h2><p>With WordPress, themes and plugins can generate quite a lot of requests on each page load. HTTP/2 leverage technology to optimize that and ditch the bundling strategy we have used with HTTP/1.1 servers.</p><p>Microsoft announced HTTP/2 support in <a href=https://azure.microsoft.com/fr-fr/blog/announcing-http-2-support-in-azure-app-service/>this article</a> on March 27, 2018.</p><p>To enable it, here are the steps:</p><ul><li>Go to the <em>app service</em></li><li>Select <em>Configuration blade</em> and then the <em>General Settings</em> tab</li><li>Scroll down to find the HTTP/2 setting and set it to <code>2.0</code>.</li><li>Save and restart the app service.</li></ul><p>You can also find the raw configuration of the app service in the <a href=https://resources.azure.com>Azure Resource Explorer</a>, but it’s more sensitive to edit over there.</p><p>You need to go under <em>subscriptions > Microsoft Azure Sponsorship > resourceGroup > RG-YourOrg-Websites > providers > Microsoft.Web > sites > YourWebsiteName (aka name of the app service)</em>.</p><h2 id=migrate-from-the-shared-hosting-to-microsoft-azure>Migrate from the shared hosting to Microsoft Azure</h2><p>This was the main task.</p><p>While I started to perform the migration using <a href=https://learn.microsoft.com/en-us/azure/app-service/migrate-wordpress#manual-migration-process>the manual method</a> for greater flexibility, I had to go back to <a href=https://learn.microsoft.com/en-us/azure/app-service/migrate-wordpress#migrate-wordpress-with-all-in-one-wp-migration-plugin>the plugin method</a>.</p><p>Why?</p><p>The <a href=https://www.advancedcustomfields.com/>Advanced Custom Fields plugin</a> wasn’t working after performing the manual steps. It was a no-go since the existing website used it heavily.</p><p>After a few attempts to find the cause, I finally migrated the website using the All-In-One WP Migration plugin.</p><p>The steps were pretty simple and nothing is missing in the guide.</p><p>As for the post’s migration actions, what Microsoft lists is pretty much what I did:</p><ul><li><p>Search and replace (paths and domains) using <a href=https://wordpress.org/plugins/better-search-replace/><em>Better Replace</em> plugin</a> to use the temporary domain (for ex.: <code>mywebsite.azurewebsites.net</code>).</p></li><li><p>Configure the custom domain once we had checked that all the functionalities worked and the pages all used the temporary domain. To configure your site with a custom domain follow the steps described in <a href=https://learn.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-custom-domain>the guide “Map existing custom DNS name”</a>.</p><div class="jli-notice jli-notice-warning" id="You will need access the DNS Zone edition for that step ⬆️"><p class=jli-notice-title>You will need access the DNS Zone edition for that step ⬆️</p></div></li><li><p>Update SSL certificates: once Microsoft Azure serves the domain, it’s as simple as going to the <code>Custom domains</code>blade in the app service and add the binding to be <code>SNI SSL</code>. This requires that you configure your registar to point the target domain to Microsoft Azure.</p></li></ul><h2 id=cost-for-non-profits-take-advantage-of-microsofts-sponsorship>Cost: for non-profits, take advantage of Microsoft’s sponsorship</h2><p>If you’re a non-profit organization, you can benefit from a Sponsorship from Microsoft.</p><p>At the time of writing, it’s <strong>$2000 per year</strong>!</p><p>For that amount, you can easily host a large website. In the case I dealt with, we have:</p><ul><li>two MySQL servers,<ul><li>the first at $62.33 per month (large website with more than 6000 pages and posts and a good steady traffic with a spike on Saturdays).</li><li>the second at $10.21 per month (small website for now),</li></ul></li><li>an app service Plan (<em>Premium v2 P1V2</em>) at $75.92 per month, which is enough to run 2 app services.</li><li>a storage account with 772 GB of Blob storage and 6 GB of File storage (yes, the organization serves a lot of audio, video and PDF files).</li></ul><p>Learn more at <a href=https://www.microsoft.com/en-us/nonprofits/azure>https://www.microsoft.com/en-us/nonprofits/azure</a>.</p><h2 id=maintenance-and-updates-with-deployment-slots>Maintenance and updates with deployment slots</h2><p>Even if I was tempted to use a plugin for that, I didn’t.</p><p>In the following paragraphs, I detail the steps I took to use deployment slots.</p><h3 id=why-deployment-slots>Why deployment slots</h3><p>Once you completed migrating the website, it’s time to think about how to perform the maintenance. That includes updating the core of WordPress, the theme and the plugins.</p><p>While you could use a plugin, such as UpdrafPlus or something else, I recommend using the deployment slots, native of Microsoft Azure, and they’re free of charge.</p><p>I agree with you: it’s more technical, but the app service plan available to you includes it.</p><p>Plus, I personally tried UpdrafPlus on Microsoft Azure and it didn’t go as well as I’d have hoped (random locking the database if the MySQL wasn’t big enough).</p><p>I have shared below a full procedure used for months by this former client in the US. And it works great!</p><h3 id=about-backups-in-microsoft-azure>About backups in Microsoft Azure</h3><p>Before we dive into the procedure itself, let’s talk about the backups.</p><p>By default, your database instance and app service are back up automatically.</p><p>The database is backed up once a day, around one hour after its creation.
You can take manual backup at any time, within the limit of 50 per instance.</p><div class="jli-notice jli-notice-note" id="About that limit"><p class=jli-notice-title>About that limit</p><p>When you create a new instance (which is the case when you perform maintenance), the counter starts from 0 again.</p><p>So you will never run out 😁</p></div><p>The app service is backed up every hour. You could set up manual backups but I don’t see a use for it.
Plus, it requires to setup a storage account (additional costs) and to hook it up to the app service.</p><p>No doing a manual backup of the app service means the synchronization between the database and the app service may be out a bit.</p><p>To avoid loss of data, I recommend taking a manual backup of the database right after an automatic backup of the app service (this is a step in the procedure).</p><p>Also refrain from making modifications (apart from the updates to perform) before completing the maintenance tasks.</p><h3 id=use-the-deployment-slots>Use the deployment slots</h3><p>When you have an app service running, you need to go to the <code>Deployment slots</code>blade.</p><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-blade.jpg width=427 height=517 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-blade_hu6f7c238f1eb67bac162fc37962a9d19b_98465_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-blade_hu6f7c238f1eb67bac162fc37962a9d19b_98465_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-blade_hu6f7c238f1eb67bac162fc37962a9d19b_98465_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Available in the App Service blades" class=gallery-image data-flex-grow=82 data-flex-basis=198px></p><p>Once in the dashboard, you can create a slot from <code>Add Slot</code>:</p><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard.jpg width=1334 height=313 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard_hu54cc8172d3bf1922ad555d8c1b05b8f8_83024_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard_hu54cc8172d3bf1922ad555d8c1b05b8f8_83024_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard_hu54cc8172d3bf1922ad555d8c1b05b8f8_83024_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="The deployment slots dashboard" class=gallery-image data-flex-grow=426 data-flex-basis=1022px></p><p>You will need to:</p><ul><li>Enter the name of the slot. Below, I share how I name it.</li><li>Select the parent app service to clone the settings from.</li></ul><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/configuring-the-slot.jpg width=585 height=330 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/configuring-the-slot_hu07dc05523e4da5bad12ba1b0ff9f8f24_48058_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/configuring-the-slot_hu07dc05523e4da5bad12ba1b0ff9f8f24_48058_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/configuring-the-slot_hu07dc05523e4da5bad12ba1b0ff9f8f24_48058_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="Configuration of the slot" class=gallery-image data-flex-grow=177 data-flex-basis=425px></p><ul><li>Confirm by clicking <code>Add</code>.</li></ul><p>After a few seconds, the deployment slots dashboard is updated:</p><p><img src=/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard-updated.jpg width=1325 height=351 srcset="/post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard-updated_hu7222e7562e96af75aedfa96189c94a8f_85105_360x0_resize_q75_box.jpg 360w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard-updated_hu7222e7562e96af75aedfa96189c94a8f_85105_600x0_resize_q75_box.jpg 600w, /post/2024-02/how-to-migrate-wordpress-site-to-ms-azure/images/deployment-slots-dashboard-updated_hu7222e7562e96af75aedfa96189c94a8f_85105_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt="The deployment slots dashboard updated with a slot" class=gallery-image data-flex-grow=377 data-flex-basis=905px></p><div class="jli-notice jli-notice-note" id="Until January 2024"><p class=jli-notice-title>Until January 2024</p><p>You had to add the virtual network to the slot, as it wasn’t <em>copied</em>.</p><p>Microsoft seems to have resolved that! Hurray 🎆</p></div><h2 id=next-steps>Next steps</h2><p>I have created for the organization I worked for <a href=https://docs.google.com/spreadsheets/d/1G8uoIAh-UOGrIepgz0q-iR9WkbgJVocGeL8J9RQMpbY>a Google Sheet checklist</a> which you can copy and use.</p><p>If you find an issue or a step that is obsolete, <a href=/page/contact-me/>let me know</a>.</p><p>I recommend going through this procedure monthly or bimonthly. It takes less than one hour after you became familiar with it.</p><h2 id=conclusion>Conclusion</h2><p>I started from scratch, without any experience on Microsoft Azure. Still, I picked up rather quickly and I applied skills I had to organize the resources properly and lead the project to completion.</p><p>I didn’t do everything but I asked questions about what I didn’t do. The son of the head of the organization pushed to use Microsoft Azure as he’s currently a Principal Cloud Engineer, specialized in cost optimization on Microsoft Azure.</p><p>He helped settings up the CDN to serve the audio, video and PDF content. He also helped to set up the dedicated Office 365 account used as the account sending emails from the website. Using the plugin <a href=https://wordpress.org/plugins/wpo365-msgraphmailer/><em>WPO365 | MICROSOFT 365 GRAPH MAILER</em></a>, we connected the forms to the Office 365 account to send the messages.</p><p>Microsoft Azure can be intimidated with the vast possibilities it provides. It’s a complex ecosystem. Yet, it’s a valuable skill to have and I’m glad I acquired it.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/microsoft-azure/>Microsoft Azure</a>
<a href=/tags/wordpress/>WordPress</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/2024-02/register-globally-all-base-components-at-once-in-vue3/><div class=article-image><img src=/post/2024-02/register-globally-all-base-components-at-once-in-vue3/images/_hucf2be4cbb0b0df2907420ff7a37243b1_263128_0653b90479767784e765200bc7647c94.jpg width=250 height=150 loading=lazy alt=" Register globally components in Vue3 and TypeScript" data-hash="md5-0AOKkOiabs+kNw8VMZlNDA=="></div><div class=article-details><h2 class=article-title>Register globally components in Vue3 and TypeScript</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2021 -
2024 Jérémie Litzler</section><section class=powerby>License GPLv3 | <a href=https://iamjeremie.me/page/terms title="Read terms and conditions of this website">Terms</a><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.24.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>